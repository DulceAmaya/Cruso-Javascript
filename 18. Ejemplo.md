# Ejemplo

Ahora, veremos un ejemplo donde aplicaremos todo lo que hemos aprendido en el curso. Para esto, crearemos un Juego de Ahorcado.

<p align="center">
    <img src="./img/js/juego.png">
</p>

Veremos el paso a paso para escribir el código HTML, CSS y JS que necesitaremos para nuestro sitio web.

Para que nuestro juego funcione correctamente, hay muchos elementos que crearemos dinámicamente, utilizando Javascript. Sin embargo, para comenzar, debemos crear el documento HTML que contendrá la estructura base de nuestro sitio web. Lo llamaremos `index.html`

```html
<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>

    </body>
</html>
```

Empezamos por darle un título a nuestro sitio web, por ejemplo; *Ahorcado*.

```html
<title>Ahorcado</title>
```

Para construir el esqueleto de nuestro sitio web, podemos pensarlo de la siguiente forma:

<p align="center">
    <img src="./img/js/base.png">
</p>

Podemos pensar que cada rectángulo representa un contenedor, esto nos ayudará a acomodar más fácilmente el contenido del sitio cuando utilicemos la hoja de estilos.

Entonces, nuestro documento HTML se vería así:

```html
<body>
    <h1 id="titulo">Juego de Ahorcado</h1>
    <div class="contenedor-dividido">
        <div class="division contenedor-imagen">

        </div>
        <div class="division contenedor-letras">

        </div>
    </div>
    <div class="contenedor-palabra"></div>
    <div class="contenedor-puntaje"></div>
</body>
```

Recordemos que de esta forma
`<div class="division contenedor-letras">` le asignamos a un mismo `div` dos clases diferentes.

Ya que tenemos el esqueleto del documento, podemos agregar la imagen que aparecerá al comienzo del juego. Para facilitar el código, tendremos una imagen por cada vez que el jugador seleccione una letra incorrecta, y las nombraremos `1`, `2`, `3`, etc.

[Imagenes](Ahorcado/img)

Entonces, agregaremos la primer imagen dentro del div `contenedor-imagen`

```html
<div class="division contenedor-imagen">
    <img src="img/1.png" id="imagen">
</div>
```

Podemos agregar también el mensaje *Ingresa una letra* y *Puntaje:  0*; que se mostrará así inicialmente, pero que modificaremos mas adelante utilizando Javascript.

```html
<div class="division contenedor-letras">
    <h3>Ingresa una letra</h3>
</div>
```

```html
<div class="contenedor-puntaje">
    Puntaje: 0
</div>
```

Además de esto, necesitamos crear la entrada de texto, donde el usuario ingresará cada letra. Para esto, utilizaremos la etiqueta `<input>` con `type=text`.

```html
<div class="division contenedor-letras">
    <h3>Ingresa una letra</h3>
    <input type="text" id="entrada-letra">
</div>
```

Hasta ahora, nuestro documento HTML luce de la siguiente forma:

```html
<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Ahorcado</title>
    </head>
    <body>
        <h1 id="titulo">Juego de Ahorcado</h1>
        <div class="contenedor-dividido">
            <div class="division contenedor-imagen">
                <img src="img/1.png" id="imagen">
            </div>
            <div class="division contenedor-letras">
                <h3>Ingresa una letra</h3>
                <input type="text" id="entrada-letra">
            </div>
        </div>
        <div class="contenedor-palabra"></div>
        <div class="contenedor-puntaje">
            Puntaje: 0
        </div>
    </body>
</html>

```
Para terminar con el archivo HTML, solo nos falta agregar nuestros archivos `.css` y `.js`, que utilizaremos de forma externa. Además, utilizaremos una fuente de [Google fonts](https://fonts.google.com/), para que el sitio luzca mejor.

Entonces, empezamos por agregar el documento `.css` y la liga a la fuente en Google fonts que más nos guste.

```html
<head>
    <meta charset="utf-8">
    <title>Ahorcado</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Coming+Soon&display=swap" rel="stylesheet">
</head>
```

Por último, agregamos nuestro documento `.js`, justo antes de cerrar la etiqueta `<body>`.

```html
<script type="text/javascript" src="js/script.js"></script>
```

Hasta ahora, nuestro sitio web luce así:

<p align="center">
    <img src="./img/js/ahorcado.png" width="500px">
    <img src="./img/js/ahorcado2.png" width="500px">
</p>

Ahora, vamos a comenzar con la hoja de estilos. Como mencionábamos arriba, muchos de los elementos de nuestro sitio web vamos a agregarlos dinámicamente usando Javascript, pero por ahora, podemos comenzar a escribir nuestro archivo `.css` para los elementos que creamos en el documento `html`.

En nuestro `index.html`, creamos una etiqueta `<link>` para la hoja de estilos externa, donde le dimos el nombre de `style.css`. Entonces, en la carpeta de nuestro proyecto, vamos a crear una nueva carpeta `css`, y dentro de ella, un documento `style.css`.

Para comenzar, vamos a darle a nuestro sitio un color de fondo. Utilizamos el selector `html`, para seleccionar todo el espacio de nuestro navegador.

```css
html{
    background-color: #d1d1d1
}
```

También, vamos a establecer el tipo de fuente. En nuestro caso, vamos a utilizar el mismo tipo de fuente para todo el sitio, por lo que vamos a utilizar un selector especial; `*`. El asterisco nos permite seleccionar todos los elementos de nuestro sitio web.

```css
*{
    font-family: 'Coming Soon', cursive;
}
```

También, vamos a establecer el estilo de los encabezados. Específicamente de `h1`. Como es el título de nuestro sitio, vamos a colocarlo en el centro de la página, y vamos a cambiar su tamaño de fuente, para hacerlo un poco más grande.
```css
h1{
    text-align: center;
    font-size: 3.5vw;
}
```

Recordemos que las unidades `vw`, nos permiten que el tamaño de fuente sea proporcional al tamaño de la ventana del navegador.

Ahora, vamos a distribuir los contenedores dentro de nuestro sitio web.

Vamos a comenzar con el contenedor `contenedor-dividido`. Dentro de este contenedor definimos dos contenedores más, que, como ilustramos en la imagen, queremos acomodar cada uno en una mitad (horizontalmente) de la página. Para esto, vamos a darle al `contenedor-dividido` la propiedad `flexbox`, que recordemos, nos permite distribuir los elementos dentro del contenedor de la siguiente forma:

<p align="center">
    <img src="./img/flexbox4.png">
</p>

Como podemos ver, el contenedor `contenedor-imagen` es mucho más alto que el contenedor `contenedor-letras`, entonces, además, queremos que ambos contenedores estén centrados verticalmente. Para esto, utilizamos la propiedad `align-items: center`.

<p align="center">
    <img src="./img/alignItems3.png">
</p>

```css
.contenedor-dividido{
    display: flex;
    align-items: center;
}
```

<p align="center">
    <img src="./img/js/ahorcado3.png">
</p>

Podemos ver que ambos contenedores se encuentran alineados lado a lados y centrados verticalmente, sin embargo, la imagen aún es demasiado grande.

Entonces, vamos a modificar el estilo del contenedor `contenedor-imagen`.

Para empezar, vamos a cambiar sus dimensiones, pues, como mencionamos arriba, queremos que cada contenedor ocupe la mitad del la página.

```css
.contenedor-imagen{
    width: 50%;
}
```

Ahora que definimos las dimensiones del contenedores, queremos centar la imagen en su interior, para esto tambien utilizaremos `flexbox`.

```css
.contenedor-imagen{
    width: 50%;
    display: flex;
    justify-content: center;
}
```

Por último, vamos a modificar las dimensiones de la imagen, pues aún es demasiado grande para nuestro sitio.


```css
#imagen{
    width: 40%;
}
```

Hasta ahora, nuestra página web luce así:

<p align="center">
    <img src="./img/js/ahorcado4.png">
</p>

Ahora, debemos acomodar el contenedor `contenedor-letras`. De la misma forma, queremos que el contenedor ocupe la mitad del página. Además, y a diferencia del `contenedor-imagen` que solo contiene el elemento `img`, aquí tenemos dos elementos, un `h3` y un `input`. Queremos centrar ambos elementos dentro del contenedor y que además, se muestre cada uno en una línea independiente. Para esto también usaremos `flexbox`.

```css
.contenedor-letras{
    width: 50%;
    display: flex;
}
```

Recordemos que, al asignarle al contenedor la propiedad `display: flex`, sus elementos automáticamente se muestran uno al lado del otro. Para cambiar esto utilizamos `flex-direction: column`, que hace que los elementos se muestren uno sobre otro.

```css
.contenedor-letras{
    width: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
}
```

Al encabezado `h3` vamos a cambiarle el tamaño de fuente para hacerlo más grande.

```css
h3{
    font-size: 1.7vw;
}
```

Vamos a modificar también el elemento `input`, que utilizaremos para que el jugador pueda ingresar una letra para adivinar. Entonces, queremos en la caja de texto sea más pequeña, del tamaño suficiente para una letra, y además, vamos a darle un estilo similar al del resto de la página.

```css
#entrada-letra{
    border: none;
    border-bottom: 1px solid #2b99ff;
    outline: none;
    width: 50px;
    text-align: center;
    font-size: 1.6vw;
    background-color: inherit;
    font-weight: bold;
}
```

Los estilos para el contenedor `contenedor-palabra` los dejaremos para más adelante, cuando tengamos el código de Javascript.

Entonces, solo nos falta el contenedor `contenedor-puntaje`. Para este contenedor, solamente vamos a modificar la fuente; vamos a hacerla más grade y negrita. Además, vamos a darle un margen, para que el mensaje no aparezca tan pagado al borde la página.

```css
.contenedor-puntaje{
    font-size: 1.7vw;
    font-weight: bold;
    margin: 30px 60px;
}
```

Así luce nuestra página hasta ahora:

<p align="center">
    <img src="./img/js/ahorcado5.png">
</p>

Aún debemos agregar las casillas donde irán las palabras que el jugador deberá adivinar, así como todo el funcionamiento del juego, y para esto vamos a utilizar Javascript.

Entonces, en la carpeta de nuestro proyecto, vamos a crear una nueva carpeta `js`, y dentro, vamos a crear el documento `script.js`, que es el nombre que le dimos a nuestro archivo en la etiqueta `<script>` en le documento `html`.

Para comenzar, vamos a crear un arreglo como una variable global, que es donde almacenaremos todas las palabras que el jugador podría adivinar durante el juego. En una implementación más avanzada podríamos utilizar un método diferente, como una base de datos pequeña, sin embargo por ahora y para no salirnos del alcance de este curso, utilizaremos arreglos.

En este ejemplo nuestro juego de ahorcado consistirá en adivinar películas, por lo que nuestro arreglo contendrá nombres de películas, cada uno representado como una cadena.

```javascript
const peliculas = ["Titanic", "Cenicienta", "Avatar", "Joker", "Toy Story", "Avengers", "Cars", "Batman Inicia", "Baby Driver", "Shrek", "Lalaland", "Monsters Inc", "El Padrino", "Mulan", "Megamente", "Iron Man", "Enredados", "La Familia Adams", "Interestelar"];
```

Crearemos además 5 variable globales que necesitaremos más adelante.

```javascript
let letras = [];
let intentos = 1;
let letrasUsadas = [];
let letrasFaltantes = 0;
let puntaje = 0;
```

Nuestra primera función será la función que iniciará el juego. Para comenzar el juego debemos seleccionar, aleatoriamente, un título de nuestro arreglo, para el que después crearemos las casillas correspondientes a cada letra.

Lo que haremos será crear una variable, donde almacenaremos un número aleatorio, correspondiente a un índice de nuestro arreglo.

```javascript
function comenzarJuego(){
    const indice = Math.floor(Math.random() * peliculas.length);
}
```
La función [`Math.random`](https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Math/random) genera un número aleatorio en rango `[0, 1)`. Y la función [`Math.floor`](https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Math/floor) nos permite obtener solamente números enteros, pues devuelve el entero inmediato que sea menor o igual al valor que recibe.

Después vamos a llamar a una función que se encargará de crear las casillas correspondientes a cada letra. Para hacer esto, la función necesita conocer el título de la película, por lo que vamos a pasarle el valor del arreglo almacenado en `indice` como un parámetro. A esta función la llamaremos `nuevaPalabra`.

```javascript
function comenzarJuego(){
    const indice = Math.floor(Math.random() * peliculas.length);
    nuevaPalabra(peliculas[indice]);
}
```

Vamos, entonces, a crear la función `nuevaPalabra`. Para empezar, vamos a separar la cadena que recibimos como parámetro en letras (y espacios, si es que la cadena está formada por más de dos palabras), así nos será más fácil crear una casilla para cada letra. Este arreglo será nuestra variable global `letras`.

```javascript
function nuevaPalabra(cadena){
    letras = Array.from(cadena).
}
```

El método [`Array.from`](https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Array/from) nos permite crear un arreglo a partir de una cadena, por ejemplo, iterando sobre está creando una entrada en el arreglo con cada uno de sus elementos, en nuestro caso, con cada letra y espacio en la cadena.

Entonces, si tenemos por ejemplo la cadena *Titanic*, nuestro arreglo quedaría:

```javascript
letras = ["T", "i", "t", "a", "n", "i", "c"];
```

Y si nuestra cadena tuviera más de una palabra, por ejemplo *El gran Gatsby*:

```javascript
letras = ["E", "l", " ", "g", "r", "a", "n", " ", "G", "a", "t", "s", "b", "y"];
```

Ahora, para saber cuales son las letras que el jugador ha adivinado, usaremos el contador auxiliar, `letrasFaltantes`, que contara el total de letras que faltan por adivinar. Al inicio del juego `letrasFaltantes` será igual al número de letras en la cadena (sin contar espacios), y, cada vez que el jugador adivine una letras correctamente, le restaremos a `letrasFaltantes` el número de veces que dicha letra aparece en la cadena.

Entonces, ahora que tenemos nuestra cadena separada en letras en el arreglo `letras`, vamos a incrementar en 1 `letrasFaltantes` por cada letra en el arreglo.

```javascript
function nuevaPalabra(cadena){
    letras = Array.from(cadena);

    //Para cada letra en el arreglo letras, si letra es distinta de " ", incrementamos en 1 letrasFaltantes.
    letras.forEach(letra => {
        if(letra !== " ")
            letrasFaltantes++;
    });
}
```

Hasta este momento, sabemos que letras componen la cadena y cuantas letras debe adivinar el jugador. Entonces, vamos a colocar en el sitio las casillas correspondientes a dichas letras.

Recordemos que, para agregar elementos utilizando el DOM, necesitamos obtener el elemento que será el *padre* de estos elementos. En nuestro caso será el div `contenedor-palabra`.

```javascript
function nuevaPalabra(cadena){
    letras = Array.from(cadena);

    //Para cada letra en el arreglo letras, si letra es distinta de " ", incrementamos en 1 letrasFaltantes.
    letras.forEach(letra => {
        if(letra !== " ")
            letrasFaltantes++;
    });

    //Obtenemos el contenedor donde irán las casillas.
    let contenedor = document.getElementsByClassName("contenedor-palabra");

    //Por cada letra en el arreglo creamos una casilla.
    letras.forEach(letra => {
        let casilla = document.createElement("div");
        //Si hay un espacio creamos un div con la clase "espacio".
        if(letra === "")
            casilla.setAttribute("class", "espacio");

        //En otro caso creamos el div con la clase "letra".
        else
            casilla.setAttribute("class", "letra");
        contenedor[0].appendChild(casilla);
    });
}
```

Para comprobar que las funciones que hemos escrito hasta ahora funcionan correctamente, podemos agregar una llamada a la función `comenzarJuego()` al final de nuestro archivo `script.js`, y abrir nuestro sitio web, `index.html` en el navegador.

<p align="center">
    <img src="./img/js/ahorcado5.png">
</p>

Aparentemente nuestro sitio luce exactamente igual.

Vamos a acceder a las *Herramientas del desarrollador* (`ctrl + shift + i`).

<p align="center">
    <img src="./img/js/inspector.png">
</p>

Podemos ver que en la sección superior de la ventana aparece el código en nuestro documento `html`. Pero, si seleccionamos el div `contenedor-palabra` para mostrar su contenido, veremos que ya no está vacío; ahora, aparecen los div `espacio` y `letra` que creamos en la función `nuevaPalabra()`.

<p align="center">
    <img src="./img/js/inspector2.png">
</p>

Sin embargo, como todos estos nuevos contenedores están vacíos, por defecto no son visibles en nuestro sitio web. Entonces, vamos a volver a nuestra hoja de estilos para cambiar eso.

Cuando creamos los contenedores en la función `nuevaPalabra()`, creamos dos tipos distintos, uno para las letras y otro para los espacios, cuando tenemos más de dos palabras. Queremos que ambos tipos de contenedores sean del mismo tamaño, y, para los contenedores `letra`, resaltaremos el borde inferior, así aparecerán como una raya por cada letra que el jugador debe adivinar; y cuando adivine una letra correctamente, esta aparecerá sobre la raya correspondiente (realmente estará dentro del contenedor). Por otro lado los contenedores `espacio` no serán visibles en la página, pero servirán para separa equitativamente las palabras.

Para empezar, queremos que la palabra, o palabras a adivinar aparezcan centradas en la pantalla. Para esto, vamos a utilizar `flexbox` en el contenedor `contenedor-palabra`, que es el que contiene a todos los contenedores `letra` y `espacio`.

```css
.contenedor-palabra{
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 25px;
}

```


Le asignamos un margen superior de 25px para darle un poco de espacio con respecto a la imagen.

Ahora, vamos darle a los dos tipos de contenedores el mismo tamaño.

```css
.letra, .espacio{
    width: 40px;
    height: 30px;
    margin: 5px;
}
```

En las hojas de estilo, si utilizamos más de dos selectores, separados por una coma, las propiedades que les asignemos se aplicarán a todos los elementos correspondientes a ambos selectores.

Ahora, vamos a cambiar el estilo únicamente de los contenedores `letra`. Como mencionamos, vamos a resaltar el borde inferior, además vamos a cambiar el tamaño de fuente y vamos a centrar su contenido, para que, cuando el jugador adivine una letra, esta aparezca alineada sobre la raya correspondiente.

```css
.letra{
    border-bottom: 2px solid #2b99ff;
    padding-bottom: 3px;
    font-size: 3vw;
    display: flex;
    justify-content: center;
    align-items: center;
}
```

Así es como luce nuestra página web ahora.

<p align="center">
    <img src="./img/js/ahorcado6.png">
</p>
